!function(t,i,s){var e,o=i.event;o.special.smartresize={setup:function(){i(this).bind("resize",o.special.smartresize.handler)},teardown:function(){i(this).unbind("resize",o.special.smartresize.handler)},handler:function(t,i){var s=this,o=arguments;t.type="smartresize",e&&clearTimeout(e),e=setTimeout(function(){jQuery.event.handle.apply(s,o)},"execAsap"===i?0:100)}},i.fn.smartresize=function(t){return t?this.bind("smartresize",t):this.trigger("smartresize",["execAsap"])},i.Mason=function(t,s){this.element=i(s),this._create(t),this._init()};var n=["position","height"];i.Mason.settings={isResizable:!0,isAnimated:!1,animationOptions:{queue:!1,duration:500},gutterWidth:0,isRTL:!1,isFitWidth:!1},i.Mason.prototype={_getBricks:function(t){var i=this.options.itemSelector,s=i?t.filter(i).add(t.find(i)):t;return s.css({position:"absolute"}).addClass("masonry-brick"),s},_create:function(s){this.options=i.extend(!0,{},i.Mason.settings,s),this.styleQueue=[],this.reloadItems();var e=this.element[0].style;this.originalStyle={};for(var o=0,h=n.length;h>o;o++){var r=n[o];this.originalStyle[r]=e[r]||null}this.element.css({position:"relative"}),this.horizontalDirection=this.options.isRTL?"right":"left",this.offset={};var a=i(document.createElement("div"));this.element.prepend(a),this.offset.y=Math.round(a.position().top),this.options.isRTL?this.offset.x=Math.round(a.position().left):(a.css({"float":"right",display:"inline-block"}),this.offset.x=Math.round(this.element.outerWidth()-a.position().left)),a.remove();var l=this;setTimeout(function(){l.element.addClass("masonry")},0),this.options.isResizable&&i(t).bind("smartresize.masonry",function(){l.resize()})},_init:function(t){this.reLayout(t)},option:function(t,s){if(i.isPlainObject(t))this.options=i.extend(!0,this.options,t);else{if(t&&"undefined"==typeof s)return this.options[t];this.options[t]=s}return this},layout:function(t,s){for(var e,o,n,h,r,a,l=0,c=t.length;c>l;l++)if(e=i(t[l]),o=Math.ceil(e.outerWidth(!0)/this.columnWidth),o=Math.min(o,this.cols),1===o)this._placeBrick(e,this.cols,this.colYs);else{for(n=this.cols+1-o,h=[],a=0;n>a;a++)r=this.colYs.slice(a,a+o),h[a]=Math.max.apply(Math,r);this._placeBrick(e,n,h)}var u={};u.height=Math.max.apply(Math,this.colYs)-this.offset.y,this.options.isFitWidth&&(u.width=this.cols*this.columnWidth-this.options.gutterWidth),this.styleQueue.push({$el:this.element,style:u});var m,d=this.isLaidOut&&this.options.isAnimated?"animate":"css",f=this.options.animationOptions;for(l=0,c=this.styleQueue.length;c>l;l++)m=this.styleQueue[l],m.$el[d](m.style,f);return this.styleQueue=[],s&&s.call(t),this.isLaidOut=!0,this},_getColumns:function(){var t=this.options.isFitWidth?this.element.parent():this.element,i=t.width();return this.columnWidth=this.options.columnWidth||this.$bricks.outerWidth(!0)||i,this.columnWidth+=this.options.gutterWidth,this.cols=Math.floor((i+this.options.gutterWidth)/this.columnWidth),this.cols=Math.max(this.cols,1),this},_placeBrick:function(t,i,s){for(var e=Math.min.apply(Math,s),o=e+t.outerHeight(!0),n=s.length,h=n,r=this.cols+1-n,a={};n--;)s[n]===e&&(h=n);for(a.top=e,a[this.horizontalDirection]=this.columnWidth*h+this.offset.x,this.styleQueue.push({$el:t,style:a}),n=0;r>n;n++)this.colYs[h+n]=o},resize:function(){var t=this.cols;this._getColumns("masonry"),this.cols!==t&&this._reloadLayout()},reLayout:function(t){this._getColumns("masonry"),this._reloadLayout(t)},_reloadLayout:function(t){var i=this.cols;for(this.colYs=[];i--;)this.colYs.push(this.offset.y);this.layout(this.$bricks,t)},reloadItems:function(){this.$bricks=this._getBricks(this.element.children())},reload:function(t){this.reloadItems(),this.reLayout(t)},appended:function(t,i){var s=this._getBricks(t);this.$bricks=this.$bricks.add(s),this.layout(s,i)},remove:function(t){this.$bricks=this.$bricks.not(t),t.remove()},destroy:function(){this.$bricks.removeClass("masonry-brick").each(function(){this.style.position=null,this.style.top=null,this.style.left=null});for(var s=this.element[0].style,e=0,o=n.length;o>e;e++){var h=n[e];s[h]=this.originalStyle[h]}this.element.unbind(".masonry").removeClass("masonry").removeData("masonry"),i(t).unbind(".masonry")}},i.fn.imagesLoaded=function(t){var i=this.find("img"),e=i.length,o="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",n=this;return e?(i.bind("load",function(){--e<=0&&this.src!==o&&t.call(n)}).each(function(){if(this.complete||this.complete===s){var t=this.src;this.src=o,this.src=t}}),this):(t.call(this),this)},i.fn.masonry=function(t){if("string"==typeof t){var s=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=i.data(this,"masonry");return e?i.isFunction(e[t])&&"_"!==t.charAt(0)?void e[t].apply(e,s):i.error("no such method '"+t+"' for masonry instance"):i.error("cannot call methods on masonry prior to initialization; attempted to call method '"+t+"'")})}return this.each(function(){var s=i.data(this,"masonry");s?s.option(t||{})._init():i.data(this,"masonry",new i.Mason(t,this))})}}(window,jQuery);